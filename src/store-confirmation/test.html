<html>

<script>
    let x  = []
    let timeout = 250
    let socket
    
    function connect(){
        socket = new WebSocket("ws://localhost:3000")
        socket.addEventListener("open", ev=>{
        console.log(`connection opened`)
    })
    socket.addEventListener("message", ev=>{
        console.log(`message recieved: ${ev.data}`)
        let z = ev.data
        let y = JSON.parse(z)
        console.log(y)
        x.push(ev)
        return
    })

    socket.onclose = function(){
        socket = null
        setTimeout(connect, 5000)
    }

    }
        
    
    connect()


</script>
</html>